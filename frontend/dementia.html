<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI-assisted Dementia — Demo</title>
  <link rel="stylesheet" href="/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"/>
  <style>
    canvas { border:1px solid #ccc; display:block; margin:10px 0; }
    .result { margin-top:10px; padding:10px; background:#f0f0f0; border-radius:5px; }
    .hide { display:none; }
    .stroop-button { padding:10px 20px; margin:5px; cursor:pointer; }
  </style>
</head>
<body>
  <!-- Header / Navbar -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="/index.html" class="logo">Unveiling <span>Parkinson’s</span></a>
      <div class="nav-links">
        <a href="/index.html#about">About</a>
        <a href="/index.html#pipeline">How It Works</a>
        <a href="/index.html#try">Parkinson Demo</a>
        <a href="/dementia.html">Dementia Quiz</a>
      </div>
    </div>
  </nav>

  <main class="section narrow" style="padding-top:48px;">
    <div class="container" data-aos="fade-up">
      <h1>AI-assisted Dementia Screening — Educational Tests</h1>
      <p class="muted">Interactive cognitive screening demo for educational purposes only.</p>

      <!-- Trail Making / Drawing -->
      <div class="card">
        <h2>1. Trail Making Test / Drawing</h2>
        <canvas id="drawingCanvas" width="300" height="300"></canvas>
        <button id="clearCanvas" class="btn btn-ghost">Clear Drawing</button>
      </div>

      <!-- Stroop Test -->
      <div class="card">
        <h2>2. Stroop Test</h2>
        <p>Click the color of the text, not the word:</p>
        <div id="stroopWord" style="font-size:24px; font-weight:bold; margin:10px 0;"></div>
        <div id="stroopButtons"></div>
        <div id="stroopResult" class="result hide"></div>
      </div>

      <!-- Memory Recall Test -->
      <div class="card">
        <h2>3. Memory Recall Test</h2>
        <p>Remember these words:</p>
        <div id="memoryWords" style="margin:5px 0; font-weight:bold;"></div>
        <input type="text" id="memoryInput" placeholder="Type the words you remember, comma separated">
        <button id="memorySubmit" class="btn btn-primary">Submit</button>
        <div id="memoryResult" class="result hide"></div>
      </div>

      <!-- Reaction Time Test -->
      <div class="card">
        <h2>4. Reaction Time Test</h2>
        <button id="startReaction" class="btn btn-primary">Start Test</button>
        <div id="reactionTarget" style="width:50px; height:50px; background:red; display:none; margin:10px 0; cursor:pointer;"></div>
        <div id="reactionResult" class="result hide"></div>
      </div>

      <!-- Digit Span Test -->
      <div class="card">
        <h2>5. Digit Span Test</h2>
        <p>Memorize this sequence:</p>
        <div id="digitSequence" style="font-weight:bold; margin:5px 0;"></div>
        <input type="text" id="digitInput" placeholder="Type the digits separated by commas">
        <button id="digitSubmit" class="btn btn-primary">Submit</button>
        <div id="digitResult" class="result hide"></div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer" style="margin-top:40px;">
    <div class="container footer-inner">
      <div>© 2025 Unveiling Parkinson’s — Team NeuroMechanics</div>
      <div class="links">
        <a href="https://www.kaggle.com/datasets/vikasukani/parkinsons-disease-data-set" target="_blank" rel="noopener">Kaggle dataset</a>
        <a href="https://github.com/Arki-Pro/parkinson-disease-detection-using-machine-learning" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
  </footer>

  <script>
    // ------------------- Drawing / Trail Making -------------------
    const canvas = document.getElementById('drawingCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    canvas.addEventListener('mousedown',()=>drawing=true);
    canvas.addEventListener('mouseup',()=>drawing=false);
    canvas.addEventListener('mousemove',(e)=>{
      if(drawing){
        ctx.lineWidth=2; ctx.lineCap='round';
        ctx.lineTo(e.offsetX,e.offsetY);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.offsetX,e.offsetY);
      }
    });
    document.getElementById('clearCanvas').addEventListener('click',()=>ctx.clearRect(0,0,canvas.width,canvas.height));

    // ------------------- Stroop Test -------------------
    const colors=['Red','Blue','Green','Orange','Purple'];
    const stroopWord = document.getElementById('stroopWord');
    const stroopButtons = document.getElementById('stroopButtons');
    const stroopResult = document.getElementById('stroopResult');
    let correctColor='';
    function newStroop(){
      const word = colors[Math.floor(Math.random()*colors.length)];
      correctColor = colors[Math.floor(Math.random()*colors.length)];
      stroopWord.textContent = word;
      stroopWord.style.color = correctColor.toLowerCase();
      stroopButtons.innerHTML='';
      colors.forEach(c=>{
        const btn = document.createElement('button');
        btn.textContent=c; btn.className='stroop-button';
        btn.style.background=c.toLowerCase();
        btn.addEventListener('click',()=>checkStroop(c));
        stroopButtons.appendChild(btn);
      });
    }
    function checkStroop(choice){
      stroopResult.classList.remove('hide');
      stroopResult.textContent=choice===correctColor ? 'Correct!' : 'Incorrect';
      setTimeout(newStroop,700);
    }
    newStroop();

    // ------------------- Memory Recall -------------------
    const memoryWords=['Apple','Table','Penny','Dog','Cat'];
    const memoryDisplay=document.getElementById('memoryWords');
    const memoryInput=document.getElementById('memoryInput');
    const memoryResult=document.getElementById('memoryResult');
    memoryDisplay.textContent=memoryWords.join(', ');
    document.getElementById('memorySubmit').addEventListener('click',()=>{
      const answers = memoryInput.value.split(',').map(s=>s.trim().toLowerCase());
      const score = memoryWords.filter(w=>answers.includes(w.toLowerCase())).length;
      memoryResult.classList.remove('hide');
      memoryResult.textContent=`You recalled ${score} out of ${memoryWords.length} words.`;
    });

    // ------------------- Reaction Time -------------------
    const startBtn=document.getElementById('startReaction');
    const target=document.getElementById('reactionTarget');
    const reactionResult=document.getElementById('reactionResult');
    let startTime;
    startBtn.addEventListener('click',()=>{
      reactionResult.classList.add('hide');
      startBtn.disabled=true;
      target.style.display='none';
      const delay=Math.random()*2000+1000;
      setTimeout(()=>{
        target.style.display='block';
        startTime=Date.now();
      },delay);
    });
    target.addEventListener('click',()=>{
      const rt=Date.now()-startTime;
      reactionResult.classList.remove('hide');
      reactionResult.textContent=`Reaction time: ${rt} ms`;
      target.style.display='none';
      startBtn.disabled=false;
    });

    // ------------------- Digit Span -------------------
    const sequence=[4,7,2,9,1];
    document.getElementById('digitSequence').textContent=sequence.join(', ');
    document.getElementById('digitSubmit').addEventListener('click',()=>{
      const input=document.getElementById('digitInput').value.split(',').map(n=>parseInt(n.trim()));
      const score = sequence.filter((n,i)=>n===input[i]).length;
      const res=document.getElementById('digitResult');
      res.classList.remove('hide');
      res.textContent=`Correct digits in order: ${score} out of ${sequence.length}`;
    });
  </script>
</body>
</html>